<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Fancy Peek Carousel — Splide</title>

    <!-- Splide CSS (CDN) -->
    <link
      href="https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.4/dist/css/splide.min.css"
      rel="stylesheet"
    />

    <style>
      .intro-line {
        text-align: center;
        padding: 12px;
        margin: 0;
        background: rgba(0, 0, 0, 1);
        color: #d0eaff;
        font-size: 15px;
        letter-spacing: 0.3px;
      }

      :root {
        --bg: #071327;
        --card-width: 80%; /* center photo width */
        --neighbor-scale: 0.86; /* how much smaller neighbors look */
        --accent: #7ad7ff;
        --muted: rgba(255, 255, 255, 0.12);
        --btn-w: 52px;
      }

      * {
        box-sizing: border-box;
      }

      html,
      body {
        height: 100%;
        margin: 0;
        background: linear-gradient(180deg, #73000a 0%, #071327 70%);
        color: #eef9ff;
        font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto,
          "Helvetica Neue", Arial;
      }

      .wrap {
        min-height: 90vh;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 36px;
      }

      .panel {
        width: clamp(360px, 92vw, 1100px);
        text-align: center;
      }

      h1 {
        margin: 0 0 6px;
        font-size: 20px;
      }

      p.lead {
        margin: 0 0 18px;
        color: var(--muted);
        font-size: 13px;
      }

      /* Splide container */
      .splide {
        width: 100%;
        height: clamp(320px, 52vh, 640px);
        margin: 0 auto;
        overflow: visible;
      }

      .splide__track {
        height: 100%;
      }

      .splide__list {
        align-items: center;
      } /* vertical centering */

      /* each slide styled as card */
      .splide__slide {
        width: var(--card-width); /* center slide width */
        height: 100%;
        border-radius: 14px;
        overflow: hidden;
        box-shadow: 0 24px 60px rgba(2, 6, 12, 0.6);
        background: linear-gradient(
          180deg,
          rgba(255, 255, 255, 0.02),
          rgba(255, 255, 255, 0.01)
        );
        display: flex;
        align-items: center;
        justify-content: center;
        transition: transform 0.5s cubic-bezier(0.2, 0.95, 0.2, 1),
          box-shadow 0.45s ease;
        position: relative;
      }

      .slide-inner {
        width: 100%;
        height: 100%;
        position: relative;
        overflow: hidden;
      }

      .slide-inner img {
        width: 102%;
        height: 102%;
        object-fit: cover;
        display: block;
        transform-origin: center center;
        transition: transform 0.55s cubic-bezier(0.2, 0.95, 0.2, 1), filter 0.3s ease;
        -webkit-user-drag: none;
        pointer-events: none;
      }

      /* overlay + vignette for cinematic look */
      .overlay {
        position: absolute;
        inset: 0;
        pointer-events: none;
        background: linear-gradient(
          180deg,
          rgba(0, 0, 0, 0) 0%,
          rgba(0, 0, 0, 0) 0%
        );
      }

      .vignette {
        position: absolute;
        inset: 0;
        pointer-events: none;
        background: radial-gradient(
          900px 400px at 50% 30%,
          rgba(0, 0, 0, 0) 0%,
          rgba(0, 0, 0, 0.18) 35%,
          rgba(0, 0, 0, 0.5) 100%
        );
      }

      /* make active slide visually on top and slightly larger */
      .splide__slide.is-active {
        z-index: 30;
        transform: none;
        box-shadow: 0 30px 90px rgba(0, 0, 0, 0.75);
      }

      .splide__slide:not(.is-active) {
        z-index: 10;
      }

      .splide__slide:not(.is-active) .slide-inner img {
        transform: scale(var(--neighbor-scale));
        filter: brightness(0.9) saturate(0.96);
      }

      /* caption bottom-left */
      .caption {
        position: absolute;
        left: 14px;
        bottom: 14px;
        color: #e9fbff;
        pointer-events: none;
        text-shadow: 0 6px 18px rgba(0, 0, 0, 0.55);
      }

      .caption .title {
        font-weight: 700;
        font-size: 15px;
      }

      .caption .sub {
        font-size: 13px;
        opacity: 0.9;
        color: #daf6ffcc;
      }

      /* buttons under the carousel */
      .controls {
        display: flex;
        gap: 12px;
        align-items: center;
        justify-content: center;
        margin-top: 12px;
      }

      .btn {
        width: var(--btn-w);
        height: var(--btn-w);
        border-radius: 12px;
        display: grid;
        place-items: center;
        background: rgba(255, 255, 255, 0.04);
        border: 1px solid rgba(255, 255, 255, 0.03);
        cursor: pointer;
        color: #fff;
        box-shadow: 0 8px 26px rgba(0, 0, 0, 0.45);
        font-size: 20px;
        transition: transform 0.12s ease, background 0.12s ease;
      }

      .btn:hover {
        transform: translateY(-4px) scale(1.03);
        background: rgba(255, 255, 255, 0.06);
      }

      /* hide built-in pagination */
      .splide__pagination {
        display: none !important;
      }

      @media (max-width: 880px) {
        :root {
          --card-width: 88%;
          --neighbor-scale: 0.9;
          --btn-w: 46px;
        }
      }

      @media (max-width: 520px) {
        :root {
          --card-width: 94%;
          --neighbor-scale: 0.94;
        }
      }
    </style>
  </head>

  <body>
    <p class="intro-line">You found Xunan's website, good job!</p>

    <div class="wrap">
      <div class="panel" role="main">
        <h1>Take a rest and look at some photos I took</h1>
        <!-- <p class="lead">One image centered — neighbors peek and are smaller. Buttons below, no dots.</p> -->

        <!-- Splide structure -->
        <div id="splide" class="splide" aria-label="Fancy peek carousel">
          <div class="splide__track">
            <ul class="splide__list">
              
              <li class="splide__slide">
                <div class="slide-inner">
                  <img
                    data-splide-lazy="photos/XPX03427.jpg"
                    alt="XPX03427"
                  />
                </div>
                <div class="overlay"></div>
                <div class="vignette"></div>
                <div class="caption">
                  <div class="title">XPX03427</div>
                  <div class="sub">In front of the Melton Observatory</div>
                </div>
              </li>

              <li class="splide__slide">
                <div class="slide-inner">
                  <img
                    data-splide-lazy="photos/XPX03250.jpg"
                    alt="XPX03250"
                  />
                </div>
                <div class="overlay"></div>
                <div class="vignette"></div>
                <div class="caption">
                  <div class="title">XPX03250</div>
                  <div class="sub">In the Thomas Cooper Library</div>
                </div>
              </li>

              <li class="splide__slide">
                <div class="slide-inner">
                  <img
                    data-splide-lazy="photos/XPX03269.jpg"
                    alt="XPX03269"
                  />
                </div>
                <div class="overlay"></div>
                <div class="vignette"></div>
                <div class="caption">
                  <div class="title">XPX03269</div>
                  <div class="sub">On the Main Street</div>
                </div>
              </li>

            </ul>
          </div>
        </div>

        <!-- controls under -->
        <div class="controls" role="toolbar" aria-label="Carousel controls">
          <button id="prev" class="btn" aria-label="Previous">‹</button>
          <button id="next" class="btn" aria-label="Next">›</button>
        </div>
      </div>
    </div>

    <!-- Splide JS -->
    <script src="https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.4/dist/js/splide.min.js"></script>

    <script>
      // Initialize Splide with center slide and peek
      const splide = new Splide("#splide", {
        type: "slide",
        perPage: 1,
        focus: "center", // center active slide
        gap: "20px",
        padding: { left: "10%", right: "10%" }, // make room so neighbors peek
        autoplay: false,
        arrows: false, // we use our custom arrows below
        pagination: false, // hide the dots
        lazyLoad: "nearby", // lazy-load current+neighbors
        speed: 600,
        dragAngleThreshold: 10,
        flickPower: 600,
        breakpoints: {
          880: { padding: { left: "6%", right: "6%" } },
          520: { padding: { left: "4%", right: "4%" } },
        },
      });

      splide.mount();

      // Hook our under-buttons (guaranteed to work after mount)
      document
        .getElementById("prev")
        .addEventListener("click", () => splide.go("<"));
      document
        .getElementById("next")
        .addEventListener("click", () => splide.go(">"));

      // Optional: add keyboard controls (left/right)
      window.addEventListener("keydown", (e) => {
        if (e.key === "ArrowLeft") splide.go("<");
        if (e.key === "ArrowRight") splide.go(">");
      });

      // Small parallax effect while dragging
      splide.on("move", () => {
        requestAnimationFrame(() => {
          const slides = splide.Components.Slides.get();
          slides.forEach((s) => {
            const el = s.slide.querySelector(".slide-inner img");
            if (!el) return;
            const prog = s.slide.progress || 0;
            const translate = prog * -16;
            const scale = 1 - Math.min(0.16, Math.abs(prog) * 0.12);
            el.style.transform = `translateX(${translate}px) scale(${scale})`;
          });
        });
      });

      // Ensure neighbor scaling looks good on init
      splide.on("mounted move", () => {
        const slides = document.querySelectorAll(".splide__slide");
        slides.forEach((sl) => sl.classList.remove("is-active"));
        const active =
          document.querySelector(".splide__slide.is-active") ||
          document.querySelector(".splide__slide.is-visible");
        if (active) active.classList.add("is-active");
      });
    </script>
  </body>
</html>
